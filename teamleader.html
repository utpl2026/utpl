<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alla tar BP och bevakar alla portar</title>

<style>
body{
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#0a1630,#050b17);
  padding:20px;
  color:#fff;
}

.edit-btn{
  position:fixed;
  top:20px;
  right:20px;
  z-index:10000;
  background:#4fc3ff;
  color:#000;
  border:none;
  padding:10px 18px;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}

.page{
  background:#0b1628;
  max-width:950px;
  margin:auto;
  padding:20px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.6);
}

h1,h2{
  text-align:center;
  margin:10px 0;
  color:#4fc3ff;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-bottom:14px;
  font-size:14px;
  background:#0f1f3a;
}

table,th,td{border:1px solid #1e3a66;}
th{background:#122a4d;color:#ffb300;}
td{padding:6px;vertical-align:top;}

.box{
  background:#0f1f3a;
  border:1px solid #1e3a66;
  border-radius:10px;
  padding:10px;
  margin-bottom:14px;
}

.flex{display:flex;gap:20px;flex-wrap:wrap;}
.half{flex:1 1 450px;}

.note{font-size:13px;color:#ffb300;}

.name{
  cursor:pointer;
  font-weight:bold;
  color:#4fc3ff;
  user-select:none;
}

.highlight-kpk{color:#ffb300;font-weight:bold;}

.alert-box{
  background:linear-gradient(135deg,#3a0f0f,#5c1a1a);
  border:2px solid #ff5252;
  color:#ffb3b3;
  font-weight:bold;
}

.alert-box::before{
  content:"⚠ VIKTIGT";
  display:block;
  margin-bottom:6px;
  color:#ff5252;
}

.page [contenteditable="true"]{
  outline:1px dashed #4fc3ff;
}

/* NAME PICKER */
#namePicker{
  position:fixed;
  inset:0;
  background:rgba(5,11,23,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

#namePicker .panel{
  background:#0b1628;
  padding:16px;
  border-radius:14px;
  width:90%;
  max-width:320px;
}

#nameList{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
}

#nameList button{
  background:#122a4d;
  color:#fff;
  border:none;
  padding:10px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<button class="edit-btn" id="editBtn" onclick="toggleEdit()">Redigera</button>

<div class="page">

<h1>Alla tar BP och bevakar alla portar</h1>

<div class="box alert-box">
Vi kör aldrig på bilen/släpet | Vi laddar våra truckar | Vi frågar chauffören om bilen är klossad<br><br>
Vi ber chauffören som ska lossa att vänta om han är tidig och vi har annat att göra
</div>

<div class="flex">
<table class="half">
<tr><td>Viby</td><td>90</td></tr>
<tr><td>Special</td><td>94</td></tr>
<tr><td>KPK</td><td>96</td></tr>
</table>

<table class="half">
<tr><th>Följande kunder sorteras vid lossning</th><td>11808</td></tr>
<tr><td></td><td>12090</td></tr>
<tr><td></td><td>14040</td></tr>
<tr><th></th><td>33033</td></tr>
<tr><td></td><td>15260</td></tr>
</table>
</div>

<table>
<tr><th colspan="2">Prio</th></tr>
<tr><td>1</td><td>Starta lass åt chaufförer</td></tr>
<tr><td>2</td><td>Lossa bilar</td></tr>
<tr><td>3</td><td>Övrigt</td></tr>
</table>

<div class="box">Vi rangerar direkt vid passstart och när vi inte har annat att göra</div>

<table>
<tr><th colspan="3">Rangering inkluderar</th></tr>
<tr><td>Ställ pallar för sig</td><td>Kontrollera etiketter i CV</td><td>Dra in varmfrukt</td></tr>
<tr><td>Förbereda BP</td><td>Rangera vändlass</td><td>Säkerställ sortering</td></tr>
<tr><td>Komprimera</td><td>Förskjut vid behov</td><td></td></tr>
</table>

<h2>Lastbilar</h2>

<div class="flex">
<table class="half">
<tr><th>IN</th></tr>
<tr><td>23:45 – Viby</td></tr>
<tr><td>01:45 – Viby</td></tr>
<tr><td>02:45 – Viby</td></tr>
<tr><td>04:15 – Viby</td></tr>
<tr><td>--:-- – </td></tr>
</table>

<table class="half">
<tr><th>UT</th></tr>
<tr><td>22:00 – Årsta</td></tr>
<tr><td>22:30 – Årsta</td></tr>
<tr><td>23:59 – Årsta</td></tr>
<tr><td>00:30 – Uppsala</td></tr>
<tr><td>01:00 – </td></tr>
</table>
</div>

<div class="box note">
* Antal K-älv och tider kan skilja sig – kontrollera alltid ULC / ULV
</div>

</div>

<!-- NAME PICKER -->
<div id="namePicker">
  <div class="panel">
    <h2>Välj operatör</h2>
    <div id="nameList"></div>
    <button onclick="closePicker()">Stäng</button>
  </div>
</div>

<script>
/* CONFIG */
const GITHUB_USER = "utpl2026";
const REPO = "utpl";
const TOKEN = "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";
const FILE = "data.json";

/* LOAD */
async function cargarServidor(){
  try{
    const r = await fetch("data.json");
    const d = await r.json();
    if(d.contenido && d.contenido.trim()!==""){
      document.querySelector(".page").innerHTML = d.contenido;
    }
  }catch(e){}
}

/* EDIT */
let editing=false;
function toggleEdit(){
  editing=!editing;

  document.querySelectorAll(
    ".page td,.page th,.page h1,.page h2,.page .box"
  ).forEach(el=>{
    el.contentEditable=editing && !el.classList.contains("name");
  });

  if(!editing) guardarServidor();
  document.getElementById("editBtn").textContent=editing?"Spara":"Redigera";
}

/* SAVE */
async function guardarServidor(){
  const contenido=document.querySelector(".page").innerHTML;
  const r=await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO}/contents/${FILE}`,{
    headers:{Authorization:`token ${TOKEN}`}
  });
  const d=await r.json();

  await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO}/contents/${FILE}`,{
    method:"PUT",
    headers:{
      Authorization:`token ${TOKEN}`,
      "Content-Type":"application/json"
    },
    body:JSON.stringify({
      message:"Update",
      content:btoa(unescape(encodeURIComponent(JSON.stringify({contenido})))),
      sha:d.sha
    })
  });
  alert("Guardado y publicado ✅");
}

/* NAME PICKER */
const workers=["Namn","Camila","Cristian","Daniel","Dimitri","Emre","Ghazwan","Igor","Jackie","Johan","Jonas","Kubalay","Lars","Malki","Manuel","Micke E","Micke M","Micke T","Mohse","Nur","Pelle","Per","Samir","Sarkis","Shayan","Yunus"];
let activeTarget=null;

function openPicker(el){
  activeTarget=el;
  const l=document.getElementById("nameList");
  l.innerHTML="";
  workers.forEach(n=>{
    const b=document.createElement("bu
                                   tton");
    b.textContent=n;
    b.onclick=()=>{activeTarget.textContent=n;closePicker();};
    l.appendChild(b);
  });
  document.getElementById("namePicker").style.display="flex";
}

function closePicker(){
  document.getElementById("namePicker").style.display="none";
  activeTarget=null;
}

window.onload=()=>{
  cargarServidor();
  document.querySelectorAll(".name").forEach(el=>el.onclick=()=>openPicker(el));
};
</script>

</body>
</html>
